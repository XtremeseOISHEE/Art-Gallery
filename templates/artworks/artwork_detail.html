{% extends 'base.html' %}

{% block title %}{{ artwork.title }}{% endblock %}

{% block content %}
    <h2>{{ artwork.title }}</h2>
    <img src="{{ artwork.image.url }}" alt="{{ artwork.title }}" width="400px">
    <p>{{ artwork.description }}</p>
    <p>Price: ${{ artwork.price }}</p>
    <p>Category: {{ artwork.category }}</p>
    <p>Artist: {{ artwork.artist.username }}</p>

    {% if user == artwork.artist %}
        <a href="{% url 'artwork_edit' artwork.pk %}">Edit</a> |
        <a href="{% url 'artwork_delete' artwork.pk %}">Delete</a>
    {% endif %}

    <!-- Show the approve button only if the user is staff and the artwork is not approved yet -->
    {% if user.is_staff and not artwork.is_approved %}
        <form method="post" action="{% url 'artwork_approve' artwork.pk %}">
            {% csrf_token %}
            <button type="submit">Approve Artwork</button>
        </form>
    {% endif %}

    <!-- Add the Order Now button -->
    <!-- Add the Order Now button -->
    {% if user.is_authenticated %}
    {% if user.role == 'buyer' %}
        <form method="post" action="{% url 'create_order' artwork.pk %}">
            {% csrf_token %}
            <button type="submit">Order Now</button>
        </form>
    {% elif user.role == 'seller' and artwork.artist != user %}
        <form method="post" action="{% url 'create_order' artwork.pk %}">
            {% csrf_token %}
            <button type="submit">Order Now</button>
        </form>
    {% endif %}
    {% endif %}

  

{% endblock %}
